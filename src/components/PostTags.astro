---
import { getCollection } from "astro:content";

const posts = await getCollection("posts");
const uniqueTags = [...new Set(posts.map((post) => post.data.tag).flat())];

const url = decodeURI(Astro.url.pathname);
---

<div class="bg-panel rounded shadow-sm p-5">
  <p class="mb-4 text-lg">Tags 🏷️</p>
  <div class="flex gap-2 flex-wrap">
    {
      uniqueTags.map((tag) => (
        <a
          class={`block bg-gray-200 rounded-full px-3 hover:opacity-70 ${url.includes(tag) ? "bg-tag-selected" : "bg-tag-default"}`}
          href={`/posts/tags/${tag}/`}
        >
          {tag}
        </a>
      ))
    }
  </div>
</div>
