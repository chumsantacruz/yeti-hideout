---
const url = Astro.url.pathname;
---

<header
  class="sticky shadow top-0 z-40 w-full bg-slate-50 h-12 px-5 grid place-items-center"
>
  <button
    data-button="open"
    class="place-self-start self-center md:hidden text-lg"
  >
    {
      url === "/"
        ? `Home 🏠`
        : url.startsWith("/posts")
          ? "Posts 📝"
          : url.startsWith("/photos")
            ? "Photos 📸"
            : null
    }
  </button>

  <dialog class="absolute top-12 left-2 bg-white m-0 shadow-md">
    <nav>
      <ul class="w-full grid auto-rows-max gap-2 p-5">
        <li>
          <a data-link href="/" data-astro-prefetch>Home 🏠</a>
        </li>
        <li>
          <a data-link href="/posts/" data-astro-prefetch>Posts 📝</a>
        </li>
        <li>
          <a data-link href="/photos/" data-astro-prefetch>Photos 📸</a>
        </li>
      </ul>
    </nav>
  </dialog>
</header>

<script>
  document.addEventListener("astro:page-load", () => {
    const dialog = document.querySelector("dialog") as HTMLDialogElement;
    const dialog_open = document.querySelector('[data-button="open"]');
    dialog_open?.addEventListener("click", () => {
      if (dialog.hasAttribute("open")) {
        dialog.close();
      } else {
        dialog.show();
      }
    });
  });
</script>
